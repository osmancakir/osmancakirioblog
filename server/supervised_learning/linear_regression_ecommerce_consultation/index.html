<!DOCTYPE html>
<html lang="en">

<head>

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-130208509-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-130208509-1');
    </script>


    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<meta property="og:title" content="Linear Regression Ecommerce Consultation" />
<meta property="og:description" content="Consulting an Ecommerce Company on optimizing their development efforts " />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://osmancakir.io/supervised_learning/linear_regression_ecommerce_consultation/" />
<meta property="article:published_time" content="2018-12-02T00:00:00&#43;00:00"/>
<meta property="article:modified_time" content="2018-12-02T00:00:00&#43;00:00"/>

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Linear Regression Ecommerce Consultation"/>
<meta name="twitter:description" content="Consulting an Ecommerce Company on optimizing their development efforts "/>
<meta name="generator" content="Hugo 0.54.0" /> 
    
    
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "headline": "Linear Regression Ecommerce Consultation",
  "url": "https://osmancakir.io/supervised_learning/linear_regression_ecommerce_consultation/",
  "wordCount": "1031",
  "datePublished": "2018-12-02T00:00:00&#43;00:00",
  "dateModified": "2018-12-02T00:00:00&#43;00:00",
  "author": {
    "@type": "Person",
    "name": "Osman Cakir"
  },
  "description": "Consulting an Ecommerce Company on optimizing their development efforts "
}
</script> 

    <title>Linear Regression Ecommerce Consultation</title>

    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb"
        crossorigin="anonymous">

     
    <link rel="stylesheet" href="https://osmancakir.io/css/custom.css">
    <link rel="stylesheet" href="https://osmancakir.io/css/syntax.css">
    <link href="https://fonts.googleapis.com/css?family=Muli:400,500,700" rel="stylesheet">
        
    <link href="" rel="alternate" type="application/rss+xml" title="osman cakir" /> 
    
    <script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\[','\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre','code'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});
</script>

</head>

<body>

    <nav class="navbar navbar-expand-sm fixed-top">
        <div class="container">
            <a class="navbar-brand" href="https://osmancakir.io">Osman Cakir</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="nav navbar-nav mr-auto"></ul>
                <ul class="navbar-nav">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true"
                            aria-expanded="false">
                            DS/CC Notes
                        </a>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item" href="https://osmancakir.io#supervised_learning">Supervised Learning</a>
                            <a class="dropdown-item" href="https://osmancakir.io#unsupervised_learning">Unsupervised Learning</a>
                            <a class="dropdown-item" href="https://osmancakir.io#deep_learning">Deep Learning</a>
                            <a class="dropdown-item" href="https://osmancakir.io#nlp">NLP</a>
                            <a class="dropdown-item" href="https://osmancakir.io#recommender_systems">Recommender Systems</a>
                            <a class="dropdown-item" href="https://osmancakir.io#python">Python</a>
                            <a class="dropdown-item" href="https://osmancakir.io#data_visualization">Data Visualization</a>
                            <a class="dropdown-item" href="https://osmancakir.io#postgresql">PostgreSQL</a>
                            <a class="dropdown-item" href="https://osmancakir.io#big_data">Big Data</a>
                            <a class="dropdown-item" href="https://osmancakir.io#creative_coding">Creative Coding</a>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://osmancakir.io#articles">Articles</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true"
                            aria-expanded="false">
                            About
                        </a>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item" href="https://osmancakir.io/about/osman_cakir/">About Osman</a>
                            <a class="dropdown-item" href="https://github.com/osmancakir">GitHub</a>
                            <a class="dropdown-item" href="https://twitter.com/osmancakirio">Twitter</a>
                            <a class="dropdown-item" href="https://www.instagram.com/osmancakirio/">Instagram</a>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </nav>


    
    <div class="container">
        <div class="row">
            <div class="col-sm-12">

                 


<article>
  <div class="technical_note">
  <header>
      <div class="alert alert-warning flashcard_ad" role="alert">
          Would you like to support my research and work? <a href="https://www.patreon.com/osmancakirio" class="alert-link">My patreon link is here.</a> Thank you, I will remember you!
      </div>
    <h1 class="technical_note_title">Linear Regression Ecommerce Consultation</h1>
    <div class="technical_note_date">
      <time datetime=" 2018-12-02T00:00:00Z "> 02 Dec 2018</time>
    </div>
  </header>
  <div class="content">
  

<p>Assume you just signed a contract with an E-commerce company based in Munich. Customers can buy clothes either on a mobile app or a website for the clothes they want. The company has also a styling store where customers can come and have sessions with a personal stylist.</p>

<p>The company is trying to decide whether to focus their efforts on their mobile app experience or their website. Your job is to help them figure it out.</p>

<p>The customer data presented here is fake. So don’t worry about the emails or credit card numbers.</p>

<p>Let’s start!</p>

<h2 id="importing-the-necessary-libraries">Importing the necessary libraries</h2>

<p>** set %matplotlib inline to see the graphs on the notebook**</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="kn">as</span> <span class="nn">sns</span>
<span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span></code></pre></div>
<h2 id="get-the-data">Get the Data</h2>

<p>Get the Data</p>

<p>The data is given to us by the company in a csv format. It has Customer info, such as Email, Address, and their color Avatar. It also has numerical value columns:</p>

<p>Avg. Session Length: Average session of in-store style advice sessions.
Time on App: Average time spent on App in minutes.
Time on Website: Average time spent on Website in minutes.
Length of Membership: How many years the customer has been a member.</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">customers</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&#34;Ecommerce Customers&#34;</span><span class="p">)</span></code></pre></div>
<p><strong>Getting to know the data:</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">customers</span><span class="o">.</span><span class="n">head</span><span class="p">()</span></code></pre></div>
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Email</th>
      <th>Address</th>
      <th>Avatar</th>
      <th>Avg. Session Length</th>
      <th>Time on App</th>
      <th>Time on Website</th>
      <th>Length of Membership</th>
      <th>Yearly Amount Spent</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>mstephenson@fernandez.com</td>
      <td>835 Frank Tunnel\nWrightmouth, MI 82180-9605</td>
      <td>Violet</td>
      <td>34.497268</td>
      <td>12.655651</td>
      <td>39.577668</td>
      <td>4.082621</td>
      <td>587.951054</td>
    </tr>
    <tr>
      <th>1</th>
      <td>hduke@hotmail.com</td>
      <td>4547 Archer Common\nDiazchester, CA 06566-8576</td>
      <td>DarkGreen</td>
      <td>31.926272</td>
      <td>11.109461</td>
      <td>37.268959</td>
      <td>2.664034</td>
      <td>392.204933</td>
    </tr>
    <tr>
      <th>2</th>
      <td>pallen@yahoo.com</td>
      <td>24645 Valerie Unions Suite 582\nCobbborough, D...</td>
      <td>Bisque</td>
      <td>33.000915</td>
      <td>11.330278</td>
      <td>37.110597</td>
      <td>4.104543</td>
      <td>487.547505</td>
    </tr>
    <tr>
      <th>3</th>
      <td>riverarebecca@gmail.com</td>
      <td>1414 David Throughway\nPort Jason, OH 22070-1220</td>
      <td>SaddleBrown</td>
      <td>34.305557</td>
      <td>13.717514</td>
      <td>36.721283</td>
      <td>3.120179</td>
      <td>581.852344</td>
    </tr>
    <tr>
      <th>4</th>
      <td>mstephens@davidson-herman.com</td>
      <td>14023 Rodriguez Passage\nPort Jacobville, PR 3...</td>
      <td>MediumAquaMarine</td>
      <td>33.330673</td>
      <td>12.795189</td>
      <td>37.536653</td>
      <td>4.446308</td>
      <td>599.406092</td>
    </tr>
  </tbody>
</table>
</div>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">customers</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span></code></pre></div>
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Avg. Session Length</th>
      <th>Time on App</th>
      <th>Time on Website</th>
      <th>Length of Membership</th>
      <th>Yearly Amount Spent</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>500.000000</td>
      <td>500.000000</td>
      <td>500.000000</td>
      <td>500.000000</td>
      <td>500.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>33.053194</td>
      <td>12.052488</td>
      <td>37.060445</td>
      <td>3.533462</td>
      <td>499.314038</td>
    </tr>
    <tr>
      <th>std</th>
      <td>0.992563</td>
      <td>0.994216</td>
      <td>1.010489</td>
      <td>0.999278</td>
      <td>79.314782</td>
    </tr>
    <tr>
      <th>min</th>
      <td>29.532429</td>
      <td>8.508152</td>
      <td>33.913847</td>
      <td>0.269901</td>
      <td>256.670582</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>32.341822</td>
      <td>11.388153</td>
      <td>36.349257</td>
      <td>2.930450</td>
      <td>445.038277</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>33.082008</td>
      <td>11.983231</td>
      <td>37.069367</td>
      <td>3.533975</td>
      <td>498.887875</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>33.711985</td>
      <td>12.753850</td>
      <td>37.716432</td>
      <td>4.126502</td>
      <td>549.313828</td>
    </tr>
    <tr>
      <th>max</th>
      <td>36.139662</td>
      <td>15.126994</td>
      <td>40.005182</td>
      <td>6.922689</td>
      <td>765.518462</td>
    </tr>
  </tbody>
</table>
</div>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">customers</span><span class="o">.</span><span class="n">info</span><span class="p">()</span></code></pre></div>
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 500 entries, 0 to 499
Data columns (total 8 columns):
Email                   500 non-null object
Address                 500 non-null object
Avatar                  500 non-null object
Avg. Session Length     500 non-null float64
Time on App             500 non-null float64
Time on Website         500 non-null float64
Length of Membership    500 non-null float64
Yearly Amount Spent     500 non-null float64
dtypes: float64(5), object(3)
memory usage: 31.3+ KB
</code></pre>

<h2 id="exploratory-data-analysis">Exploratory Data Analysis</h2>

<p><strong>Let&rsquo;s explore the data!</strong></p>

<hr />

<p><strong>Compare the Time on Website and Yearly Amount Spent columns to see whether the correlation make sense.</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">sns</span><span class="o">.</span><span class="n">set_palette</span><span class="p">(</span><span class="s2">&#34;GnBu_d&#34;</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set_style</span><span class="p">(</span><span class="s1">&#39;whitegrid&#39;</span><span class="p">)</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># More time on site, more money spent.</span>
<span class="n">sns</span><span class="o">.</span><span class="n">jointplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;Time on Website&#39;</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="s1">&#39;Yearly Amount Spent&#39;</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="n">customers</span><span class="p">)</span></code></pre></div>
<pre><code>&lt;seaborn.axisgrid.JointGrid at 0x120bfcc88&gt;
</code></pre>

<p><img src="linear_regression_ecommerce_consultation_12_1.png" alt="png" /></p>

<p>** Do the same analysis but with the Time on App column instead. **</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">sns</span><span class="o">.</span><span class="n">jointplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;Time on App&#39;</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="s1">&#39;Yearly Amount Spent&#39;</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="n">customers</span><span class="p">)</span></code></pre></div>
<pre><code>&lt;seaborn.axisgrid.JointGrid at 0x132db5908&gt;
</code></pre>

<p><img src="linear_regression_ecommerce_consultation_14_1.png" alt="png" /></p>

<p>** Use jointplot to create a 2D hex bin plot comparing Time on App and Length of Membership.**</p>

<p>What about Time Spent on App vs. Lenght of Membership?</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">sns</span><span class="o">.</span><span class="n">jointplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;Time on App&#39;</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="s1">&#39;Length of Membership&#39;</span><span class="p">,</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;hex&#39;</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="n">customers</span><span class="p">)</span></code></pre></div>
<pre><code>&lt;seaborn.axisgrid.JointGrid at 0x130edac88&gt;
</code></pre>

<p><img src="linear_regression_ecommerce_consultation_17_1.png" alt="png" /></p>

<p>Ok, maybe it is better to see the whole picture by considering the relationships across the entire data set.</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">sns</span><span class="o">.</span><span class="n">pairplot</span><span class="p">(</span><span class="n">customers</span><span class="p">)</span></code></pre></div>
<pre><code>&lt;seaborn.axisgrid.PairGrid at 0x132fb3da0&gt;
</code></pre>

<p><img src="linear_regression_ecommerce_consultation_19_1.png" alt="png" /></p>

<p><strong>Based off this plot, Length of Membership looks to be the most correlated feature with Yearly Amount Spent. Let’s create a linear model to explore it deeper.</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># Length of Membership </span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">sns</span><span class="o">.</span><span class="n">lmplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;Length of Membership&#39;</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="s1">&#39;Yearly Amount Spent&#39;</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="n">customers</span><span class="p">)</span></code></pre></div>
<pre><code>&lt;seaborn.axisgrid.FacetGrid at 0x13538d0b8&gt;
</code></pre>

<p><img src="linear_regression_ecommerce_consultation_22_1.png" alt="png" /></p>

<h2 id="training-and-testing-data">Training and Testing Data</h2>

<p><strong>Now that we’ve completed the EDA we can move on to the actual analysis.</strong></p>

<p>Set features of the customers and the label: “Yearly Amount Spent” column.
Split the data into training and testing sets.</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">y</span> <span class="o">=</span> <span class="n">customers</span><span class="p">[</span><span class="s1">&#39;Yearly Amount Spent&#39;</span><span class="p">]</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">X</span> <span class="o">=</span> <span class="n">customers</span><span class="p">[[</span><span class="s1">&#39;Avg. Session Length&#39;</span><span class="p">,</span> <span class="s1">&#39;Time on App&#39;</span><span class="p">,</span><span class="s1">&#39;Time on Website&#39;</span><span class="p">,</span> <span class="s1">&#39;Length of Membership&#39;</span><span class="p">]]</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">101</span><span class="p">)</span></code></pre></div>
<h2 id="training-the-model">Training the Model</h2>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="kn">import</span> <span class="n">LinearRegression</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">lm</span> <span class="o">=</span> <span class="n">LinearRegression</span><span class="p">()</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">lm</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span><span class="n">y_train</span><span class="p">)</span></code></pre></div>
<pre><code>LinearRegression(copy_X=True, fit_intercept=True, n_jobs=1, normalize=False)
</code></pre>

<p><strong>Now, it is time to see our coefficients:</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># The coefficients</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Coefficients: </span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">lm</span><span class="o">.</span><span class="n">coef_</span><span class="p">)</span></code></pre></div>
<pre><code>Coefficients: 
 [ 25.98154972  38.59015875   0.19040528  61.27909654]
</code></pre>

<h2 id="predicting-test-data">Predicting Test Data</h2>

<p>Let’s see how we perform on the test data and evaluate our model.</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">predictions</span> <span class="o">=</span> <span class="n">lm</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span> <span class="n">X_test</span><span class="p">)</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span><span class="n">predictions</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Y Test&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Predicted Y&#39;</span><span class="p">)</span></code></pre></div>
<pre><code>&lt;matplotlib.text.Text at 0x135546320&gt;
</code></pre>

<p><img src="linear_regression_ecommerce_consultation_36_1.png" alt="png" /></p>

<h2 id="evaluating-the-model">Evaluating the Model</h2>

<p>We’ll evaluate our model performance by calculating the residual sum of squares and the explained variance score (R^2).</p>

<p><strong>Calculate the Mean Absolute Error, Mean Squared Error, and the Root Mean Squared Error.</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># calculate these metrics by hand!</span>
<span class="kn">from</span> <span class="nn">sklearn</span> <span class="kn">import</span> <span class="n">metrics</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;MAE:&#39;</span><span class="p">,</span> <span class="n">metrics</span><span class="o">.</span><span class="n">mean_absolute_error</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">predictions</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;MSE:&#39;</span><span class="p">,</span> <span class="n">metrics</span><span class="o">.</span><span class="n">mean_squared_error</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">predictions</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;RMSE:&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">metrics</span><span class="o">.</span><span class="n">mean_squared_error</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">predictions</span><span class="p">)))</span></code></pre></div>
<pre><code>MAE: 7.22814865343
MSE: 79.813051651
RMSE: 8.93381506698
</code></pre>

<h2 id="residuals">Residuals</h2>

<p>Seems like we have a very good model with a good fit. Let’s quickly explore the residuals to make sure everything was okay with our data. <strong>We want to make sure the residuals looks normally distributed.</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">sns</span><span class="o">.</span><span class="n">distplot</span><span class="p">((</span><span class="n">y_test</span><span class="o">-</span><span class="n">predictions</span><span class="p">),</span><span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">);</span></code></pre></div>
<p><img src="linear_regression_ecommerce_consultation_40_0.png" alt="png" /></p>

<h2 id="concluding-remarks">Concluding Remarks</h2>

<p>Our original question was, should the company focus its efforts on mobile app or website development? Or maybe this decision doesn’t even really matter, and Membership Time is what is really important. The coefficients can give us an idea.</p>

<p>** Recreate the dataframe below. **</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">coeffecients</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">lm</span><span class="o">.</span><span class="n">coef_</span><span class="p">,</span><span class="n">X</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
<span class="n">coeffecients</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Coeffecient&#39;</span><span class="p">]</span>
<span class="n">coeffecients</span></code></pre></div>
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Coeffecient</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Avg. Session Length</th>
      <td>25.981550</td>
    </tr>
    <tr>
      <th>Time on App</th>
      <td>38.590159</td>
    </tr>
    <tr>
      <th>Time on Website</th>
      <td>0.190405</td>
    </tr>
    <tr>
      <th>Length of Membership</th>
      <td>61.279097</td>
    </tr>
  </tbody>
</table>
</div>

<p><strong>Interpreting the coefficients:</strong></p>

<p>Holding all other features fixed:
A 1 unit increase in Avg. Session Length is associated with an increase of 25.98 total dollars spent.
A 1 unit increase in Time on App is associated with an increase of 38.59 total dollars spent.
A 1 unit increase in Time on Website is associated with an increase of 0.19 total dollars spent.
A 1 unit increase in Length of Membership is associated with an increase of 61.27 total dollars spent.</p>

<p>Now there are two different approaches to this result. As the data scientist, our suggestion would depend on what does the management wants. If the company wants its website to catch up to the performance of the mobile app, then it should focus on that. Or the company can focus on the development of the mobile app since it is already performing well.</p>

<h2 id="well-done">Well Done</h2>

</div>
  <aside>
      <div class="bug_reporting">
          <h4>Find an error or bug?</h4>
          <p>Everything on this site is available on GitHub. Head to <a href='https://github.com/osmancakir/osmancakirioblog/issues/new'>and submit a suggested change</a>. You can also message me directly on <a href='https://twitter.com/osmancakirio'>Twitter</a>.</p>
      </div>
      </aside>

    </div>
</article>




            </div>

        </div>
    </div>

    

    <footer class="footer text-center">
        <div class="container">
            <span class="text-muted">This project contains 17 pages and is available on <a href="https://github.com/osmancakir/osmancakirioblog">GitHub</a>. Copyright &copy; Osman Cakir, <time datetime="2018">2018</time>.</span>
        </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ"
        crossorigin="anonymous"></script>

</body>

</html>